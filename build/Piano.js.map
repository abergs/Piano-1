{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///build/Piano.js","webpack:///webpack/bootstrap 164a96c88337b3b4f292","webpack:///external \"tone\"","webpack:///./Salamander.js","webpack:///./Util.js","webpack:///./PianoBase.js","webpack:///./Harmonics.js","webpack:///./Notes.js","webpack:///./Pedal.js","webpack:///./Release.js","webpack:///./Piano.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_Util","default","getReleasesUrl","midi","getHarmonicsUrl","midiToNote","replace","getNotesUrl","vel","noteToMidi","note","_tone","Frequency","toMidi","toNote","midiToFrequencyRatio","mod","Tone","intervalToFrequencyRatio","createSource","buffer","BufferSource","randomBetween","low","high","Math","random","undefined","_tone2","obj","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","length","descriptor","key","protoProps","staticProps","PianoBase","_AudioNode","vol","arguments","_this","getPrototypeOf","createInsOuts","volume","gainToDb","output","gain","set","dbToGain","AudioNode","_interopRequireDefault","_Salamander","_Salamander2","_PianoBase2","_PianoBase3","harmonics","Harmonics","_PianoBase","range","lowerIndex","findIndex","upperIndex","notes","slice","_samples","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","Salamander","err","return","time","velocity","_sampler","triggerAttack","baseUrl","_this2","Promise","success","fail","Sampler","connect","release","Notes","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","push","Array","isArray","velocitiesMap","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","velocities","slicedNotes","_samplers","_activeNotes","Map","forEach","has","src","dispose","source","onended","_disposeSource","stop","delete","velPos","roundedVel","round","diff","_midiToFrequencyRatio","_midiToFrequencyRatio2","ratio","_hasNote","_getNote","playbackRate","curve","start","_this3","promises","prom","Buffers","all","Pedal","_downTime","Infinity","_currentSound","_buffers","up","down","dir","_squash","_playSample","Release","Piano","_Pedal","_Pedal2","_Notes","_Harmonics","_Harmonics2","_Release","_Release2","options","defaults","_loaded","_heldNotes","_sustainedNotes","_notes","_pedal","_harmonics","_release","url","load","then","loaded","toSeconds","isDown","t","clear","now","isString","prevNote","holdTime","prevVel","dampenGain","max","pow","log","param","_this4","pedalUp","keyUp","cb","Buffer","on"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,EAAAG,QAAA,SACA,kBAAAC,gBAAAC,IACAD,QAAA,QAAAJ,GACA,gBAAAC,SACAA,QAAA,MAAAD,EAAAG,QAAA,SAEAJ,EAAA,MAAAC,EAAAD,EAAA,OACCO,KAAA,SAAAC,GACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAT,OAGA,IAAAC,GAAAS,EAAAD,IACAE,EAAAF,EACAG,GAAA,EACAZ,WAUA,OANAO,GAAAE,GAAAI,KAAAZ,EAAAD,QAAAC,IAAAD,QAAAQ,GAGAP,EAAAW,GAAA,EAGAX,EAAAD,QAvBA,GAAAU,KA+DA,OAnCAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAG,EAAA,SAAAK,GAA2C,MAAAA,IAG3CR,EAAAS,EAAA,SAAAjB,EAAAkB,EAAAC,GACAX,EAAAY,EAAApB,EAAAkB,IACAG,OAAAC,eAAAtB,EAAAkB,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAX,EAAAkB,EAAA,SAAAzB,GACA,GAAAkB,GAAAlB,KAAA0B,WACA,WAA2B,MAAA1B,GAAA,SAC3B,WAAiC,MAAAA,GAEjC,OADAO,GAAAS,EAAAE,EAAA,IAAAA,GACAA,GAIAX,EAAAY,EAAA,SAAAQ,EAAAC,GAAsD,MAAAR,QAAAS,UAAAC,eAAAlB,KAAAe,EAAAC,IAGtDrB,EAAAwB,EAAA,GAGAxB,IAAAyB,EAAA,KDgBM,SAAUhC,EAAQD,GEhFxBC,EAAAD,QAAAM,GFsFM,SAAUL,EAAQD,EAASQ,GAEjC,YAGAa,QAAOC,eAAetB,EAAS,cAC9BgB,OAAO,GG5FR,IAAAkB,GAAA1B,EAAA,EHiGAR,GAAQmC,SG7FPC,eAFc,SAECC,GACd,aAAaA,EAAO,IAApB,cAGDC,gBANc,SAMED,GACf,eAAe,EAAAH,EAAAK,YAAWF,GAAMG,QAAQ,IAAK,KAA7C,cAGDC,YAVc,SAUFJ,EAAMK,GACjB,OAAU,EAAAR,EAAAK,YAAWF,GAAMG,QAAQ,IAAK,KAAxC,IAAgDE,EAAhD,gBHkGI,SAAUzC,EAAQD,EAASQ,GAEjC,YI/GA,SAASmC,GAAWC,GACnB,OAAO,EAAAC,EAAAC,WAAUF,GAAMG,SAGxB,QAASR,GAAWF,GACnB,OAAO,EAAAQ,EAAAC,WAAUT,EAAM,QAAQW,SAGhC,QAASC,GAAqBZ,GAC7B,GAAIa,GAAMb,EAAO,CACjB,OAAY,KAARa,GACKb,EAAO,EAAGc,UAAKC,yBAAyB,IAC9B,IAARF,GACFb,EAAO,EAAGc,UAAKC,0BAA0B,KAEzCf,EAAM,GAIhB,QAASgB,GAAaC,GACrB,MAAO,IAAIC,gBAAaD,GAGzB,QAASE,GAAcC,EAAKC,GAC3B,MAAOC,MAAKC,UAAYF,EAAOD,GAAOA,EJ0FvCpC,OAAOC,eAAetB,EAAS,cAC9BgB,OAAO,IAERhB,EAAQwD,cAAgBxD,EAAQiD,qBAAuBjD,EAAQqD,aAAerD,EAAQ2C,WAAa3C,EAAQuC,eAAasB,EIvHxH,IAAAhB,GAAArC,EAAA,GJ2HIsD,EAEJ,SAAgCC,GAAO,MAAOA,IAAOA,EAAIpC,WAAaoC,GAAQ5B,QAAS4B,IAFnDlB,EA+BpC7C,GI7HQuC,aJ8HRvC,EI9HoB2C,aJ+HpB3C,EI/HgCqD,eJgIhCrD,EIhI8CiD,uBJiI9CjD,EIjIoEwD,iBJqI9D,SAAUvD,EAAQD,EAASQ,GAEjC,YAeA,SAASwD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMxD,GAAQ,IAAKwD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwD,EAAPxD,EAElO,QAAS0D,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAAS1C,UAAYT,OAAOqD,OAAOD,GAAcA,EAAW3C,WAAa6C,aAAe3D,MAAOwD,EAAUhD,YAAY,EAAOoD,UAAU,EAAMrD,cAAc,KAAekD,IAAYpD,OAAOwD,eAAiBxD,OAAOwD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAhBjepD,OAAOC,eAAetB,EAAS,cAC9BgB,OAAO,GAGR,IAAI+D,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIvE,GAAI,EAAGA,EAAIuE,EAAMC,OAAQxE,IAAK,CAAE,GAAIyE,GAAaF,EAAMvE,EAAIyE,GAAW5D,WAAa4D,EAAW5D,aAAc,EAAO4D,EAAW7D,cAAe,EAAU,SAAW6D,KAAYA,EAAWR,UAAW,GAAMvD,OAAOC,eAAe2D,EAAQG,EAAWC,IAAKD,IAAiB,MAAO,UAAUlB,EAAaoB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBd,EAAYpC,UAAWwD,GAAiBC,GAAaP,EAAiBd,EAAaqB,GAAqBrB,MK3KhiBrB,EAAArC,EAAA,GL+KIsD,EAEJ,SAAgCC,GAAO,MAAOA,IAAOA,EAAIpC,WAAaoC,GAAQ5B,QAAS4B,IAFnDlB,GK7Kf2C,ELuLL,SAAUC,GKtLzB,QAAAD,KAAqB,GAATE,GAASC,UAAAR,OAAA,OAAAtB,KAAA8B,UAAA,GAAAA,UAAA,GAAH,CAAG3B,GAAA3D,KAAAmF,EAAA,IAAAI,GAAAxB,EAAA/D,MAAAmF,EAAAV,WAAAzD,OAAAwE,eAAAL,IAAA3E,KAAAR,MAAA,OAEpBuF,GAAKE,cAAc,EAAG,GAEtBF,EAAKG,OAASL,EAJME,ELgNrB,MAzBArB,GAAUiB,EAAWC,GAerBV,EAAaS,IACZH,IAAK,SACL5D,IAAK,WKjML,MAAO0B,WAAK6C,SAAS3F,KAAK4F,OAAOC,KAAKlF,QLoMtCmF,IAAK,SKlMKT,GACVrF,KAAK4F,OAAOC,KAAKlF,MAAQmC,UAAKiD,SAASV,OLsMjCF,GKjN+Ba,YLoNvCrG,GAAQmC,QKpNaqD,GLwNf,SAAUvF,EAAQD,EAASQ,GAEjC,YAqBA,SAAS8F,GAAuBvC,GAAO,MAAOA,IAAOA,EAAIpC,WAAaoC,GAAQ5B,QAAS4B,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMxD,GAAQ,IAAKwD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwD,EAAPxD,EAElO,QAAS0D,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAAS1C,UAAYT,OAAOqD,OAAOD,GAAcA,EAAW3C,WAAa6C,aAAe3D,MAAOwD,EAAUhD,YAAY,EAAOoD,UAAU,EAAMrD,cAAc,KAAekD,IAAYpD,OAAOwD,eAAiBxD,OAAOwD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAxBjepD,OAAOC,eAAetB,EAAS,cAC9BgB,OAAO,GAGR,IAAI+D,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIvE,GAAI,EAAGA,EAAIuE,EAAMC,OAAQxE,IAAK,CAAE,GAAIyE,GAAaF,EAAMvE,EAAIyE,GAAW5D,WAAa4D,EAAW5D,aAAc,EAAO4D,EAAW7D,cAAe,EAAU,SAAW6D,KAAYA,EAAWR,UAAW,GAAMvD,OAAOC,eAAe2D,EAAQG,EAAWC,IAAKD,IAAiB,MAAO,UAAUlB,EAAaoB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBd,EAAYpC,UAAWwD,GAAiBC,GAAaP,EAAiBd,EAAaqB,GAAqBrB,MMnOhiBqC,EAAA/F,EAAA,GNuOIgG,EAAeF,EAAuBC,GMtO1CE,EAAAjG,EAAA,GN0OIkG,EAAcJ,EAAuBG,GMzOzCvE,EAAA1B,EAAA,GACAqC,EAAArC,EAAA,GAGMmG,GAAa,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAEtFC,ENoPL,SAAUC,GMlPzB,QAAAD,KAA4B,GAAhBE,GAAgBnB,UAAAR,OAAA,OAAAtB,KAAA8B,UAAA,GAAAA,UAAA,IAAT,GAAI,IAAK3B,GAAA3D,KAAAuG,EAAA,IAAAhB,GAAAxB,EAAA/D,MAAAuG,EAAA9B,WAAAzD,OAAAwE,eAAAe,IAAA/F,KAAAR,OAGrB0G,EAAaJ,EAAUK,UAAU,SAACpE,GAAD,MAAUA,IAAQkE,EAAM,KAC3DG,EAAaN,EAAUK,UAAU,SAACpE,GAAD,MAAUA,IAAQkE,EAAM,IAC7DG,IAA6B,IAAhBA,EAAoBA,EAAaN,EAAUxB,OAAS8B,CAEjE,IAAMC,GAAQP,EAAUQ,MAAMJ,EAAYE,EAE1CrB,GAAKwB,WATsB,IAAAC,IAAA,EAAAC,GAAA,EAAAC,MAAA1D,EAAA,KAW3B,OAAA2D,GAAAC,EAAcP,EAAdQ,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAoB,IAAX3F,GAAW8F,EAAAxG,KACnB4E,GAAKwB,SAAS1F,GAAKoG,UAAWxF,gBAAgBZ,IAZpB,MAAAqG,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,aAAAV,GAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,KAAAC,IAAA,MAAA3B,GNwT5B,MArEArB,GAAUqC,EAAWC,GAiDrB9B,EAAa6B,IACZvB,IAAK,QACLrE,MAAO,SMtRF4B,EAAMqF,EAAMC,GAEbtF,GAAQ+D,EAAU,IAAM/D,GAAQ+D,EAAUA,EAAUxB,OAAO,IAC9D9E,KAAK8H,SAASC,eAAc,EAAAlG,EAAAK,YAAWK,GAAOqF,EAAMC,GAAW,EAAAhG,EAAAsB,eAAc,GAAK,ON0RnF6B,IAAK,OACLrE,MAAO,SMvRHqH,GAAQ,GAAAC,GAAAjI,IACZ,OAAO,IAAIkI,SAAQ,SAACC,EAASC,GAC5BH,EAAKH,SAAW,GAAIO,WAAQJ,EAAKlB,SAAUoB,EAASH,GAASM,QAAQL,EAAKrC,QAC1EqC,EAAKH,SAASS,QAAU,QN8RnBhC,GM1T+BpB,UN6TvCxF,GAAQmC,QM7TayE,GNiUf,SAAU3G,EAAQD,EAASQ,GAEjC,YA0BA,SAAS8F,GAAuBvC,GAAO,MAAOA,IAAOA,EAAIpC,WAAaoC,GAAQ5B,QAAS4B,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMxD,GAAQ,IAAKwD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwD,EAAPxD,EAElO,QAAS0D,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAAS1C,UAAYT,OAAOqD,OAAOD,GAAcA,EAAW3C,WAAa6C,aAAe3D,MAAOwD,EAAUhD,YAAY,EAAOoD,UAAU,EAAMrD,cAAc,KAAekD,IAAYpD,OAAOwD,eAAiBxD,OAAOwD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GA7BjepD,OAAOC,eAAetB,EAAS,cAC9BgB,OAAO,IAERhB,EAAQ6I,UAAQhF,EAEhB,IAAIiF,GAAiB,WAAc,QAASC,GAAcC,EAAKrI,GAAK,GAAIsI,MAAeC,GAAK,EAAUC,GAAK,EAAWC,MAAKvF,EAAW,KAAM,IAAK,GAAiCwF,GAA7BC,EAAKN,EAAItB,OAAOC,cAAmBuB,GAAMG,EAAKC,EAAG1B,QAAQC,QAAoBoB,EAAKM,KAAKF,EAAGrI,QAAYL,GAAKsI,EAAK9D,SAAWxE,GAA3DuI,GAAK,IAAoE,MAAOnB,GAAOoB,GAAK,EAAMC,EAAKrB,EAAO,QAAU,KAAWmB,GAAMI,EAAW,QAAGA,EAAW,SAAO,QAAU,GAAIH,EAAI,KAAMC,IAAQ,MAAOH,GAAQ,MAAO,UAAUD,EAAKrI,GAAK,GAAI6I,MAAMC,QAAQT,GAAQ,MAAOA,EAAY,IAAItB,OAAOC,WAAYtG,QAAO2H,GAAQ,MAAOD,GAAcC,EAAKrI,EAAa,MAAM,IAAIwD,WAAU,4DAEllBY,EAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIvE,GAAI,EAAGA,EAAIuE,EAAMC,OAAQxE,IAAK,CAAE,GAAIyE,GAAaF,EAAMvE,EAAIyE,GAAW5D,WAAa4D,EAAW5D,aAAc,EAAO4D,EAAW7D,cAAe,EAAU,SAAW6D,KAAYA,EAAWR,UAAW,GAAMvD,OAAOC,eAAe2D,EAAQG,EAAWC,IAAKD,IAAiB,MAAO,UAAUlB,EAAaoB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBd,EAAYpC,UAAWwD,GAAiBC,GAAaP,EAAiBd,EAAaqB,GAAqBrB,MOrVhiBrB,EAAArC,EAAA,GACA+F,GPwVaD,EAAuBzD,GOxVpCrC,EAAA,IP4VIgG,EAAeF,EAAuBC,GO3V1CE,EAAAjG,EAAA,GP+VIkG,EAAcJ,EAAuBG,GO9VzCvE,EAAA1B,EAAA,GAKMkJ,GACLC,GAAM,GACNC,GAAM,EAAG,IACTC,GAAM,EAAG,EAAG,IACZC,GAAM,EAAG,EAAG,GAAI,IAChBC,GAAM,EAAG,EAAG,EAAG,GAAI,IACnBC,GAAM,EAAG,EAAG,EAAG,GAAI,GAAI,IACvBC,GAAM,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,IAC1BC,GAAM,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,IAC7BC,GAAM,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,IACjCC,IAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,IACpCC,IAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,IACxCC,IAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,IAC3CC,IAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAC/CC,IAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAClDC,IAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACtDC,IAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,KAGpDxD,GAAS,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IP8WzHlH,GOzWC6I,MPyWe,SAAUhC,GOvWrC,QAAAgC,KAA0C,GAA9B/B,GAA8BnB,UAAAR,OAAA,OAAAtB,KAAA8B,UAAA,GAAAA,UAAA,IAAvB,GAAI,KAAMgF,EAAahF,UAAAR,OAAA,OAAAtB,KAAA8B,UAAA,GAAAA,UAAA,GAAF,CAAE3B,GAAA3D,KAAAwI,EAAA,IAAAjD,GAAAxB,EAAA/D,MAAAwI,EAAA/D,WAAAzD,OAAAwE,eAAAgD,IAAAhI,KAAAR,OAGnC0G,EAAaG,EAAMF,UAAU,SAACpE,GAAD,MAAUA,IAAQkE,EAAM,KACvDG,EAAaC,EAAMF,UAAU,SAACpE,GAAD,MAAUA,IAAQkE,EAAM,IACzDG,IAA6B,IAAhBA,EAAoBA,EAAaC,EAAM/B,OAAS8B,EAAa,CAE1E,IAAM2D,GAAc1D,EAAMC,MAAMJ,EAAYE,EAPH,OASzCrB,GAAKiF,UAAYnB,EAAciB,GAAYxD,QAE3CvB,EAAKkF,aAAe,GAAIC,KAExBnF,EAAKiF,UAAUG,QAAQ,SAACtI,EAAK/B,GAC5BiF,EAAKiF,UAAUlK,MACfiK,EAAYI,QAAQ,SAACpI,GACpBgD,EAAKiF,UAAUlK,GAAGiC,GAAQkF,UAAWrF,YAAYG,EAAMF,OAhBhBkD,EPud1C,MA/GArB,GAAUsE,EAAOhC,GAiCjB9B,EAAa8D,IACZxD,IAAK,WACLrE,MAAO,SOtXC4B,EAAMsF,GACd,MAAO7H,MAAKwK,UAAU9I,eAAemG,IAAa7H,KAAKwK,UAAU3C,GAAU+C,IAAIrI,MPyX/EyC,IAAK,WACLrE,MAAO,SOvXC4B,EAAMsF,GACd,MAAO7H,MAAKwK,UAAU3C,GAAUzG,IAAImB,MP0XpCyC,IAAK,iBACLrE,MAAO,SOxXOkK,GACdA,EAAIC,UACJD,EAAM,QP2XN7F,IAAK,OACLrE,MAAO,SOzXH4B,EAAMqF,EAAMC,GAAS,GAAAI,GAAAjI,IAErBA,MAAKyK,aAAaG,IAAIrI,KACzBvC,KAAKyK,aAAarJ,IAAImB,GAAMoI,QAAQ,SAAAI,GAEnCA,EAAOC,QAAU/C,EAAKgD,eACtBF,EAAOG,KAAKtD,EAFI,OAIjB5H,KAAKyK,aAAaU,OAAO5I,OP+X1ByC,IAAK,QACLrE,MAAO,SO5XF4B,EAAMqF,EAAMC,GAEjB,GAAMuD,GAASvD,GAAY7H,KAAKwK,UAAU1F,OAAS,GAC7CuG,EAAa/H,KAAKgI,MAAMF,GACxBG,EAAOF,EAAaD,EACtBvF,EAAO,EAAW,GAAP0F,CAEe,KAA1BvL,KAAKwK,UAAU1F,SAClBe,EAAOgC,EARkB,IAAA2D,IAWN,EAAA3J,EAAAe,sBAAqBL,GAXfkJ,EAAAhD,EAAA+C,EAAA,GAWrBxJ,EAXqByJ,EAAA,GAWfC,EAXeD,EAAA,EAa1B,IAAIzL,KAAK2L,SAAS3J,EAAMqJ,GAAY,CACnC,GAAMN,IAAS,EAAAlJ,EAAAmB,cAAahD,KAAK4L,SAAS5J,EAAMqJ,GAChDN,GAAOc,aAAalL,MAAQ+K,EAC5BX,EAAOzC,QAAQtI,KAAK4F,QACpBmF,EAAOe,MAAQ,cACff,EAAOgB,MAAMnE,EAAM,MAAGpE,GAAWqC,EAAM,GAElC7F,KAAKyK,aAAaG,IAAIrI,IAC1BvC,KAAKyK,aAAa3E,IAAIvD,MAEvBvC,KAAKyK,aAAarJ,IAAImB,GAAM2G,KAAK6B,OPmYlC/F,IAAK,OACLrE,MAAO,SOhYHqH,GAAQ,GAAAgE,GAAAhM,KACNiM,IAON,OANAjM,MAAKwK,UAAUG,QAAQ,SAACjH,EAAKpD,GAC5B,GAAI4L,GAAO,GAAIhE,SAAQ,SAACC,GACvB6D,EAAKxB,UAAUlK,GAAK,GAAI6L,WAAQzI,EAAKyE,EAASH,IAE/CiE,GAAS/C,KAAKgD,KAERhE,QAAQkE,IAAIH,OPsYbzD,GOzdmBrD,YP8drB,SAAUvF,EAAQD,EAASQ,GAEjC,YAuBA,SAAS8F,GAAuBvC,GAAO,MAAOA,IAAOA,EAAIpC,WAAaoC,GAAQ5B,QAAS4B,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMxD,GAAQ,IAAKwD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwD,EAAPxD,EAElO,QAAS0D,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAAS1C,UAAYT,OAAOqD,OAAOD,GAAcA,EAAW3C,WAAa6C,aAAe3D,MAAOwD,EAAUhD,YAAY,EAAOoD,UAAU,EAAMrD,cAAc,KAAekD,IAAYpD,OAAOwD,eAAiBxD,OAAOwD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GA1BjepD,OAAOC,eAAetB,EAAS,cAC9BgB,OAAO,GAGR,IAAI+D,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIvE,GAAI,EAAGA,EAAIuE,EAAMC,OAAQxE,IAAK,CAAE,GAAIyE,GAAaF,EAAMvE,EAAIyE,GAAW5D,WAAa4D,EAAW5D,aAAc,EAAO4D,EAAW7D,cAAe,EAAU,SAAW6D,KAAYA,EAAWR,UAAW,GAAMvD,OAAOC,eAAe2D,EAAQG,EAAWC,IAAKD,IAAiB,MAAO,UAAUlB,EAAaoB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBd,EAAYpC,UAAWwD,GAAiBC,GAAaP,EAAiBd,EAAaqB,GAAqBrB,MQvgBhiBuC,EAAAjG,EAAA,GR2gBIkG,EAAcJ,EAAuBG,GQ1gBzCF,EAAA/F,EAAA,GACA0B,GR6gBmBoE,EAAuBC,GQ7gB1C/F,EAAA,IACAqC,EAAArC,EAAA,GAEqBkM,GRghBRpG,EAAuBzD,GAUxB,SAAUgE,GQzhBrB,QAAA6F,KAAa1I,EAAA3D,KAAAqM,EAAA,IAAA9G,GAAAxB,EAAA/D,MAAAqM,EAAA5H,WAAAzD,OAAAwE,eAAA6G,IAAA7L,KAAAR,MAAA,OAGZuF,GAAK+G,UAAYC,IAEjBhH,EAAKiH,cAAgB,KAErBjH,EAAKkH,SAAW,KAPJlH,ER8lBb,MApEArB,GAAUmI,EAAO7F,GAejB9B,EAAa2H,IACZrH,IAAK,OACLrE,MAAO,SQjiBHqH,GAAQ,GAAAC,GAAAjI,IACZ,OAAO,IAAIkI,SAAQ,SAACC,GACnBF,EAAKwE,SAAW,GAAIN,YACnBO,GAAK,cACLC,KAAO,eACLxE,EAASH,QR4iBbhD,IAAK,UACLrE,MAAO,SQtiBAiH,GACH5H,KAAKwM,eACRxM,KAAKwM,cAActB,KAAKtD,EAAK,GAAK,IAEnC5H,KAAKwM,cAAgB,QRyiBrBxH,IAAK,cACLrE,MAAO,SQviBIiH,EAAMgF,GACjB5M,KAAKwM,eAAgB,EAAA3K,EAAAmB,cAAahD,KAAKyM,SAASrL,IAAIwL,IACpD5M,KAAKwM,cAAcV,MAAQ,cAC3B9L,KAAKwM,cAAclE,QAAQtI,KAAK4F,QAAQmG,MAAMnE,GAAM,EAAA/F,EAAAsB,eAAc,EAAG,SAAOK,GAAW,IAAM,EAAA3B,EAAAsB,eAAc,GAAK,GAAI,QR0iBpH6B,IAAK,OACLrE,MAAO,SQxiBHiH,GACJ5H,KAAK6M,QAAQjF,GACb5H,KAAKsM,UAAY1E,EACjB5H,KAAK8M,YAAYlF,EAAM,WR2iBvB5C,IAAK,KACLrE,MAAO,SQziBLiH,GACF5H,KAAK6M,QAAQjF,GACb5H,KAAKsM,UAAYC,IACjBvM,KAAK8M,YAAYlF,EAAM,SR4iBvB5C,IAAK,SACLrE,MAAO,SQ1iBDiH,GACN,MAAOA,GAAO5H,KAAKsM,cR8iBbD,GQ/lB2BlH,WRkmBnCxF,GAAQmC,QQlmBauK,GRsmBf,SAAUzM,EAAQD,EAASQ,GAEjC,YAqBA,SAAS8F,GAAuBvC,GAAO,MAAOA,IAAOA,EAAIpC,WAAaoC,GAAQ5B,QAAS4B,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMxD,GAAQ,IAAKwD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwD,EAAPxD,EAElO,QAAS0D,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAAS1C,UAAYT,OAAOqD,OAAOD,GAAcA,EAAW3C,WAAa6C,aAAe3D,MAAOwD,EAAUhD,YAAY,EAAOoD,UAAU,EAAMrD,cAAc,KAAekD,IAAYpD,OAAOwD,eAAiBxD,OAAOwD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAxBjepD,OAAOC,eAAetB,EAAS,cAC9BgB,OAAO,GAGR,IAAI+D,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIvE,GAAI,EAAGA,EAAIuE,EAAMC,OAAQxE,IAAK,CAAE,GAAIyE,GAAaF,EAAMvE,EAAIyE,GAAW5D,WAAa4D,EAAW5D,aAAc,EAAO4D,EAAW7D,cAAe,EAAU,SAAW6D,KAAYA,EAAWR,UAAW,GAAMvD,OAAOC,eAAe2D,EAAQG,EAAWC,IAAKD,IAAiB,MAAO,UAAUlB,EAAaoB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBd,EAAYpC,UAAWwD,GAAiBC,GAAaP,EAAiBd,EAAaqB,GAAqBrB,MSpnBhiBqC,EAAA/F,EAAA,GTwnBIgG,EAAeF,EAAuBC,GSvnB1CE,EAAAjG,EAAA,GT2nBIkG,EAAcJ,EAAuBG,GS1nBzCvE,EAAA1B,EAAA,GACAqC,EAAArC,EAAA,GAEqB4M,ETqoBP,SAAUvG,GSnoBvB,QAAAuG,GAAYtG,GAAM9C,EAAA3D,KAAA+M,EAAA,IAAAxH,GAAAxB,EAAA/D,MAAA+M,EAAAtI,WAAAzD,OAAAwE,eAAAuH,IAAAvM,KAAAR,MAGjBuF,GAAKkH,WACL,KAAK,GAAInM,GAAImG,EAAM,GAAInG,GAAKmG,EAAM,GAAInG,IACrCiF,EAAKkH,SAASnM,GAAKmH,UAAW1F,eAAezB,EAL7B,OAAAiF,GTuqBlB,MAnCArB,GAAU6I,EAASvG,GAcnB9B,EAAaqI,IACZ/H,IAAK,OACLrE,MAAO,SS3oBHqH,GAAQ,GAAAC,GAAAjI,IACZ,OAAO,IAAIkI,SAAQ,SAACC,GACnBF,EAAKwE,SAAW,GAAIN,WAAQlE,EAAKwE,SAAUtE,EAASH,QTipBrDhD,IAAK,QACLrE,MAAO,SS9oBF4B,EAAMqF,EAAMC,GACjB,GAAI7H,KAAKyM,SAAS7B,IAAIrI,GAAM,CAC3B,GAAIwI,IAAS,EAAAlJ,EAAAmB,cAAahD,KAAKyM,SAASrL,IAAImB,IAAO+F,QAAQtI,KAAK4F,OAEhEiC,KAAY,EAAAhG,EAAAsB,eAAc,GAAK,GAC/B4H,EAAOgB,MAAMnE,EAAM,MAAGpE,GAAW,KAAQqE,EAAU,QTmpB9CkF,GSzqB6B5H,UT4qBrCxF,GAAQmC,QS5qBaiL,GTgrBf,SAAUnN,EAAQD,EAASQ,GAEjC,YAgCA,SAAS8F,GAAuBvC,GAAO,MAAOA,IAAOA,EAAIpC,WAAaoC,GAAQ5B,QAAS4B,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMxD,GAAQ,IAAKwD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwD,EAAPxD,EAElO,QAAS0D,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAAS1C,UAAYT,OAAOqD,OAAOD,GAAcA,EAAW3C,WAAa6C,aAAe3D,MAAOwD,EAAUhD,YAAY,EAAOoD,UAAU,EAAMrD,cAAc,KAAekD,IAAYpD,OAAOwD,eAAiBxD,OAAOwD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAnCjepD,OAAOC,eAAetB,EAAS,cAC9BgB,OAAO,IAERhB,EAAQqN,UAAQxJ,EAEhB,IAAIkB,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIvE,GAAI,EAAGA,EAAIuE,EAAMC,OAAQxE,IAAK,CAAE,GAAIyE,GAAaF,EAAMvE,EAAIyE,GAAW5D,WAAa4D,EAAW5D,aAAc,EAAO4D,EAAW7D,cAAe,EAAU,SAAW6D,KAAYA,EAAWR,UAAW,GAAMvD,OAAOC,eAAe2D,EAAQG,EAAWC,IAAKD,IAAiB,MAAO,UAAUlB,EAAaoB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBd,EAAYpC,UAAWwD,GAAiBC,GAAaP,EAAiBd,EAAaqB,GAAqBrB,MU/rBhiBrB,EAAArC,EAAA,GVmsBIsD,EAASwC,EAAuBzD,GUlsBpCyK,EAAA9M,EAAA,GVssBI+M,EAAUjH,EAAuBgH,GUrsBrCE,EAAAhN,EAAA,GACAiN,EAAAjN,EAAA,GV0sBIkN,EAAcpH,EAAuBmH,GUzsBzCE,EAAAnN,EAAA,GV6sBIoN,EAAYtH,EAAuBqH,GU5sBvCpH,EAAA/F,EAAA,EVgtBmB8F,GAAuBC,GAc9BvG,EUxtBCqN,MVwtBe,SAAU5H,GUttBrC,QAAA4H,KAAarJ,EAAA3D,KAAAgN,EAEZ,IAAMQ,GAAU1K,UAAK2K,SAASnI,WAAY,QAAS,aAAc,YAChEgF,WAAa,EACb7D,OAAS,GAAI,KACb8B,SAAU,IALChD,EAAAxB,EAAA/D,MAAAgN,EAAAvI,WAAAzD,OAAAwE,eAAAwH,IAAAxM,KAAAR,MAAA,OASZuF,GAAKE,cAAc,EAAG,GAEtBF,EAAKmI,SAAU,EAEfnI,EAAKoI,WAAa,GAAIjD,KAEtBnF,EAAKqI,gBAAkB,GAAIlD,KAE3BnF,EAAKsI,OAAS,GAAIrF,SAAMgF,EAAQ/G,MAAO+G,EAAQlD,YAAYhC,QAAQ/C,EAAKK,QAExEL,EAAKuI,QAAS,GAAIzB,YAAQ/D,QAAQ/C,EAAKK,QAEnC4H,EAAQjF,UACXhD,EAAKwI,WAAa,GAAIxH,WAAUiH,EAAQ/G,OAAO6B,QAAQ/C,EAAKK,QAE5DL,EAAKyI,SAAW,GAAIjB,WAAQS,EAAQ/G,OAAO6B,QAAQ/C,EAAKK,SAxB7CL,EVy9Bb,MAlQArB,GAAU8I,EAAO5H,GAwCjBV,EAAasI,IACZhI,IAAK,OACLrE,MAAO,WUhuB+C,GAAAsH,GAAAjI,KAAlDiO,EAAkD3I,UAAAR,OAAA,OAAAtB,KAAA8B,UAAA,GAAAA,UAAA,GAA9C,8CACF2G,GAAYjM,KAAK6N,OAAOK,KAAKD,GAAMjO,KAAK8N,OAAOI,KAAKD,GAO1D,OANIjO,MAAK+N,YACR9B,EAAS/C,KAAKlJ,KAAK+N,WAAWG,KAAKD,IAEhCjO,KAAKgO,UACR/B,EAAS/C,KAAKlJ,KAAKgO,SAASE,KAAKD,IAE3B/F,QAAQkE,IAAIH,GAAUkC,KAAK,WACjClG,EAAKyF,SAAU,OV+uBhB1I,IAAK,YASLrE,MAAO,SUruBEiH,GAOT,MANI5H,MAAKoO,SACRxG,EAAO5H,KAAKqO,UAAUzG,GACjB5H,KAAK8N,OAAOQ,OAAO1G,IACvB5H,KAAK8N,OAAOnB,KAAK/E,IAGZ5H,QV+uBPgF,IAAK,UACLrE,MAAO,SUxuBAiH,GAAK,GAAAoE,GAAAhM,IAcZ,OAbIA,MAAKoO,SACRxG,EAAO5H,KAAKqO,UAAUzG,GAClB5H,KAAK8N,OAAOQ,OAAO1G,KACtB5H,KAAK8N,OAAOpB,GAAG9E,GAEf5H,KAAK4N,gBAAgBjD,QAAQ,SAAC4D,EAAGhM,GAC3ByJ,EAAK2B,WAAW/C,IAAIrI,IACxByJ,EAAK6B,OAAO3C,KAAK3I,EAAMqF,KAGzB5H,KAAK4N,gBAAgBY,UAGhBxO,QVuvBPgF,IAAK,UACLrE,MAAO,SU7uBA4B,GAAoC,GAA9BqF,GAA8BtC,UAAAR,OAAA,OAAAtB,KAAA8B,UAAA,GAAAA,UAAA,GAAzBxC,UAAK2L,MAAO5G,EAAavC,UAAAR,OAAA,OAAAtB,KAAA8B,UAAA,GAAAA,UAAA,GAAJ,EAevC,OAdItF,MAAKoO,SACRxG,EAAO5H,KAAKqO,UAAUzG,GAElB9E,UAAK4L,SAASnM,KACjBA,EAAOe,KAAKgI,OAAM,EAAA9I,EAAAC,WAAUF,GAAMG,WAG9B1C,KAAK2N,WAAW/C,IAAIrI,KAExBvC,KAAK2N,WAAW7H,IAAIvD,GAAOqF,OAAMC,aAEjC7H,KAAK6N,OAAO9B,MAAMxJ,EAAMqF,EAAMC,KAGzB7H,QV2vBPgF,IAAK,QACLrE,MAAO,SUnvBF4B,GAAoC,GAA9BqF,GAA8BtC,UAAAR,OAAA,OAAAtB,KAAA8B,UAAA,GAAAA,UAAA,GAAzBxC,UAAK2L,MAAO5G,EAAavC,UAAAR,OAAA,OAAAtB,KAAA8B,UAAA,GAAAA,UAAA,GAAJ,EACrC,IAAItF,KAAKoO,SACRxG,EAAO5H,KAAKqO,UAAUzG,GAElB9E,UAAK4L,SAASnM,KACjBA,EAAOe,KAAKgI,OAAM,EAAA9I,EAAAC,WAAUF,GAAMG,WAG/B1C,KAAK2N,WAAW/C,IAAIrI,IAAM,CAE7B,GAAMoM,GAAW3O,KAAK2N,WAAWvM,IAAImB,EACrCvC,MAAK2N,WAAWxC,OAAO5I,GAEnBvC,KAAKgO,UACRhO,KAAKgO,SAASjC,MAAMxJ,EAAMqF,EAAMC,EAIjC,IAAM+G,GAAWhH,EAAO+G,EAAS/G,KAC3BiH,EAAUF,EAAS9G,SACrBiH,EAAc,GAAIxL,KAAKyL,IAAIH,EAAU,IAAQC,EAAUhH,CAC3DiH,GAAaxL,KAAK0L,IAAI1L,KAAK2L,IAAI3L,KAAKyL,IAAID,EAAY,IAAK,GAAK,EAE1D9O,KAAK8N,OAAOQ,OAAO1G,GACjB5H,KAAK4N,gBAAgBhD,IAAIrI,IAC7BvC,KAAK4N,gBAAgB9H,IAAIvD,EAAMqF,IAGhC5H,KAAK6N,OAAO3C,KAAK3I,EAAMqF,EAAMC,GAEzB7H,KAAK+N,YACR/N,KAAK+N,WAAWhC,MAAMxJ,EAAMqF,EAAMkH,IAKtC,MAAO9O,SVowBPgF,IAAK,YACLrE,MAAO,SUzvBEuO,EAAO7J,GAChB,OAAO6J,GACN,IAAK,OACJlP,KAAK6N,OAAOnI,OAASL,CACrB,MACD,KAAK,QACJrF,KAAK8N,OAAOpI,OAASL,CACrB,MACD,KAAK,UACArF,KAAKgO,WACRhO,KAAKgO,SAAStI,OAASL,EAExB,MACD,KAAK,YACArF,KAAK+N,aACR/N,KAAK+N,WAAWrI,OAASL,GAI5B,MAAOrF,SV4vBPgF,IAAK,UACLrE,MAAO,WU1vBC,GAAAwO,GAAAnP,IAKR,OAJAA,MAAKoP,UACLpP,KAAK2N,WAAWhD,QAAQ,SAAChK,EAAO4B,GAC/B4M,EAAKE,MAAM9M,KAELvC,QVqwBPgF,IAAK,WACLrE,MAAO,SU/vBC2O,GAER,MADAC,UAAOC,GAAG,WAAYF,GACftP,QVkwBPgF,IAAK,SACL5D,IAAK,WUh6BL,MAAOpB,MAAK0N,YVq6BNV,GU39BmBhH","file":"./build/Piano.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"tone\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"tone\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Piano\"] = factory(require(\"tone\"));\n\telse\n\t\troot[\"Piano\"] = factory(root[\"tone\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"tone\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"tone\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Piano\"] = factory(require(\"tone\"));\n\telse\n\t\troot[\"Piano\"] = factory(root[\"tone\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 8);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _Util = __webpack_require__(2);\n\nexports.default = {\n\tgetReleasesUrl: function getReleasesUrl(midi) {\n\t\treturn 'rel' + (midi - 20) + '.[mp3|ogg]';\n\t},\n\tgetHarmonicsUrl: function getHarmonicsUrl(midi) {\n\t\treturn 'harmL' + (0, _Util.midiToNote)(midi).replace('#', 's') + '.[mp3|ogg]';\n\t},\n\tgetNotesUrl: function getNotesUrl(midi, vel) {\n\t\treturn (0, _Util.midiToNote)(midi).replace('#', 's') + 'v' + vel + '.[mp3|ogg]';\n\t}\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.randomBetween = exports.midiToFrequencyRatio = exports.createSource = exports.noteToMidi = exports.midiToNote = undefined;\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction noteToMidi(note) {\n\treturn (0, _tone.Frequency)(note).toMidi();\n}\n\nfunction midiToNote(midi) {\n\treturn (0, _tone.Frequency)(midi, 'midi').toNote();\n}\n\nfunction midiToFrequencyRatio(midi) {\n\tvar mod = midi % 3;\n\tif (mod === 1) {\n\t\treturn [midi - 1, _tone2.default.intervalToFrequencyRatio(1)];\n\t} else if (mod === 2) {\n\t\treturn [midi + 1, _tone2.default.intervalToFrequencyRatio(-1)];\n\t} else {\n\t\treturn [midi, 1];\n\t}\n}\n\nfunction createSource(buffer) {\n\treturn new _tone.BufferSource(buffer);\n}\n\nfunction randomBetween(low, high) {\n\treturn Math.random() * (high - low) + low;\n}\n\nexports.midiToNote = midiToNote;\nexports.noteToMidi = noteToMidi;\nexports.createSource = createSource;\nexports.midiToFrequencyRatio = midiToFrequencyRatio;\nexports.randomBetween = randomBetween;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PianoBase = function (_AudioNode) {\n\t_inherits(PianoBase, _AudioNode);\n\n\tfunction PianoBase() {\n\t\tvar vol = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n\t\t_classCallCheck(this, PianoBase);\n\n\t\tvar _this = _possibleConstructorReturn(this, (PianoBase.__proto__ || Object.getPrototypeOf(PianoBase)).call(this));\n\n\t\t_this.createInsOuts(0, 1);\n\n\t\t_this.volume = vol;\n\t\treturn _this;\n\t}\n\n\t_createClass(PianoBase, [{\n\t\tkey: 'volume',\n\t\tget: function get() {\n\t\t\treturn _tone2.default.gainToDb(this.output.gain.value);\n\t\t},\n\t\tset: function set(vol) {\n\t\t\tthis.output.gain.value = _tone2.default.dbToGain(vol);\n\t\t}\n\t}]);\n\n\treturn PianoBase;\n}(_tone.AudioNode);\n\nexports.default = PianoBase;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nvar _PianoBase2 = __webpack_require__(3);\n\nvar _PianoBase3 = _interopRequireDefault(_PianoBase2);\n\nvar _Util = __webpack_require__(2);\n\nvar _tone = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// the harmonics notes that Salamander has\nvar harmonics = [21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87];\n\nvar Harmonics = function (_PianoBase) {\n\t_inherits(Harmonics, _PianoBase);\n\n\tfunction Harmonics() {\n\t\tvar range = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [21, 108];\n\n\t\t_classCallCheck(this, Harmonics);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Harmonics.__proto__ || Object.getPrototypeOf(Harmonics)).call(this));\n\n\t\tvar lowerIndex = harmonics.findIndex(function (note) {\n\t\t\treturn note >= range[0];\n\t\t});\n\t\tvar upperIndex = harmonics.findIndex(function (note) {\n\t\t\treturn note >= range[1];\n\t\t});\n\t\tupperIndex = upperIndex === -1 ? upperIndex = harmonics.length : upperIndex;\n\n\t\tvar notes = harmonics.slice(lowerIndex, upperIndex);\n\n\t\t_this._samples = {};\n\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator = notes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar n = _step.value;\n\n\t\t\t\t_this._samples[n] = _Salamander2.default.getHarmonicsUrl(n);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t_iterator.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn _this;\n\t}\n\n\t_createClass(Harmonics, [{\n\t\tkey: 'start',\n\t\tvalue: function start(note, time, velocity) {\n\t\t\t//make sure it's a valid range\n\t\t\tif (note >= harmonics[0] && note <= harmonics[harmonics.length - 1]) {\n\t\t\t\tthis._sampler.triggerAttack((0, _Util.midiToNote)(note), time, velocity * (0, _Util.randomBetween)(0.5, 1));\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'load',\n\t\tvalue: function load(baseUrl) {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (success, fail) {\n\t\t\t\t_this2._sampler = new _tone.Sampler(_this2._samples, success, baseUrl).connect(_this2.output);\n\t\t\t\t_this2._sampler.release = 1;\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn Harmonics;\n}(_PianoBase3.default);\n\nexports.default = Harmonics;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Notes = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nvar _PianoBase2 = __webpack_require__(3);\n\nvar _PianoBase3 = _interopRequireDefault(_PianoBase2);\n\nvar _Util = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * Maps velocity depths to Salamander velocities\r\n */\nvar velocitiesMap = {\n\t1: [8],\n\t2: [6, 12],\n\t3: [1, 8, 15],\n\t4: [1, 5, 10, 15],\n\t5: [1, 4, 8, 12, 16],\n\t6: [1, 3, 7, 10, 13, 16],\n\t7: [1, 3, 6, 9, 11, 13, 16],\n\t8: [1, 3, 5, 7, 9, 11, 13, 15],\n\t9: [1, 3, 5, 7, 9, 11, 13, 15, 16],\n\t10: [1, 2, 3, 5, 7, 9, 11, 13, 15, 16],\n\t11: [1, 2, 3, 5, 7, 9, 11, 13, 14, 15, 16],\n\t12: [1, 2, 3, 4, 5, 7, 9, 11, 13, 14, 15, 16],\n\t13: [1, 2, 3, 4, 5, 7, 9, 11, 12, 13, 14, 15, 16],\n\t14: [1, 2, 3, 4, 5, 6, 7, 9, 11, 12, 13, 14, 15, 16],\n\t15: [1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16],\n\t16: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]\n};\n\nvar notes = [21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87, 90, 93, 96, 99, 102, 105, 108];\n\n/**\r\n *  Manages all of the hammered string sounds\r\n */\n\nvar Notes = exports.Notes = function (_PianoBase) {\n\t_inherits(Notes, _PianoBase);\n\n\tfunction Notes() {\n\t\tvar range = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [21, 108];\n\t\tvar velocities = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n\t\t_classCallCheck(this, Notes);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Notes.__proto__ || Object.getPrototypeOf(Notes)).call(this));\n\n\t\tvar lowerIndex = notes.findIndex(function (note) {\n\t\t\treturn note >= range[0];\n\t\t});\n\t\tvar upperIndex = notes.findIndex(function (note) {\n\t\t\treturn note >= range[1];\n\t\t});\n\t\tupperIndex = upperIndex === -1 ? upperIndex = notes.length : upperIndex + 1;\n\n\t\tvar slicedNotes = notes.slice(lowerIndex, upperIndex);\n\n\t\t_this._samplers = velocitiesMap[velocities].slice();\n\n\t\t_this._activeNotes = new Map();\n\n\t\t_this._samplers.forEach(function (vel, i) {\n\t\t\t_this._samplers[i] = {};\n\t\t\tslicedNotes.forEach(function (note) {\n\t\t\t\t_this._samplers[i][note] = _Salamander2.default.getNotesUrl(note, vel);\n\t\t\t});\n\t\t});\n\t\treturn _this;\n\t}\n\n\t_createClass(Notes, [{\n\t\tkey: '_hasNote',\n\t\tvalue: function _hasNote(note, velocity) {\n\t\t\treturn this._samplers.hasOwnProperty(velocity) && this._samplers[velocity].has(note);\n\t\t}\n\t}, {\n\t\tkey: '_getNote',\n\t\tvalue: function _getNote(note, velocity) {\n\t\t\treturn this._samplers[velocity].get(note);\n\t\t}\n\t}, {\n\t\tkey: '_disposeSource',\n\t\tvalue: function _disposeSource(src) {\n\t\t\tsrc.dispose();\n\t\t\tsrc = null;\n\t\t}\n\t}, {\n\t\tkey: 'stop',\n\t\tvalue: function stop(note, time, velocity) {\n\t\t\tvar _this2 = this;\n\n\t\t\t//stop all of the currently playing note\n\t\t\tif (this._activeNotes.has(note)) {\n\t\t\t\tthis._activeNotes.get(note).forEach(function (source) {\n\t\t\t\t\tvar release = 1;\n\t\t\t\t\tsource.onended = _this2._disposeSource;\n\t\t\t\t\tsource.stop(time + release, release);\n\t\t\t\t});\n\t\t\t\tthis._activeNotes.delete(note);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'start',\n\t\tvalue: function start(note, time, velocity) {\n\n\t\t\tvar velPos = velocity * (this._samplers.length - 1);\n\t\t\tvar roundedVel = Math.round(velPos);\n\t\t\tvar diff = roundedVel - velPos;\n\t\t\tvar gain = 1 - diff * 0.5;\n\n\t\t\tif (this._samplers.length === 1) {\n\t\t\t\tgain = velocity;\n\t\t\t}\n\n\t\t\tvar _midiToFrequencyRatio = (0, _Util.midiToFrequencyRatio)(note),\n\t\t\t    _midiToFrequencyRatio2 = _slicedToArray(_midiToFrequencyRatio, 2),\n\t\t\t    midi = _midiToFrequencyRatio2[0],\n\t\t\t    ratio = _midiToFrequencyRatio2[1];\n\n\t\t\tif (this._hasNote(midi, roundedVel)) {\n\t\t\t\tvar source = (0, _Util.createSource)(this._getNote(midi, roundedVel));\n\t\t\t\tsource.playbackRate.value = ratio;\n\t\t\t\tsource.connect(this.output);\n\t\t\t\tsource.curve = 'exponential';\n\t\t\t\tsource.start(time, 0, undefined, gain, 0);\n\n\t\t\t\tif (!this._activeNotes.has(note)) {\n\t\t\t\t\tthis._activeNotes.set(note, []);\n\t\t\t\t}\n\t\t\t\tthis._activeNotes.get(note).push(source);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'load',\n\t\tvalue: function load(baseUrl) {\n\t\t\tvar _this3 = this;\n\n\t\t\tvar promises = [];\n\t\t\tthis._samplers.forEach(function (obj, i) {\n\t\t\t\tvar prom = new Promise(function (success) {\n\t\t\t\t\t_this3._samplers[i] = new _tone.Buffers(obj, success, baseUrl);\n\t\t\t\t});\n\t\t\t\tpromises.push(prom);\n\t\t\t});\n\t\t\treturn Promise.all(promises);\n\t\t}\n\t}]);\n\n\treturn Notes;\n}(_PianoBase3.default);\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PianoBase2 = __webpack_require__(3);\n\nvar _PianoBase3 = _interopRequireDefault(_PianoBase2);\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nvar _Util = __webpack_require__(2);\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Pedal = function (_PianoBase) {\n\t_inherits(Pedal, _PianoBase);\n\n\tfunction Pedal() {\n\t\t_classCallCheck(this, Pedal);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Pedal.__proto__ || Object.getPrototypeOf(Pedal)).call(this));\n\n\t\t_this._downTime = Infinity;\n\n\t\t_this._currentSound = null;\n\n\t\t_this._buffers = null;\n\t\treturn _this;\n\t}\n\n\t_createClass(Pedal, [{\n\t\tkey: 'load',\n\t\tvalue: function load(baseUrl) {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (success) {\n\t\t\t\t_this2._buffers = new _tone.Buffers({\n\t\t\t\t\tup: 'pedalU1.mp3',\n\t\t\t\t\tdown: 'pedalD1.mp3'\n\t\t\t\t}, success, baseUrl);\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   *  Squash the current playing sound\r\n   */\n\n\t}, {\n\t\tkey: '_squash',\n\t\tvalue: function _squash(time) {\n\t\t\tif (this._currentSound) {\n\t\t\t\tthis._currentSound.stop(time + 0.1, 0.1);\n\t\t\t}\n\t\t\tthis._currentSound = null;\n\t\t}\n\t}, {\n\t\tkey: '_playSample',\n\t\tvalue: function _playSample(time, dir) {\n\t\t\tthis._currentSound = (0, _Util.createSource)(this._buffers.get(dir));\n\t\t\tthis._currentSound.curve = 'exponential';\n\t\t\tthis._currentSound.connect(this.output).start(time, (0, _Util.randomBetween)(0, 0.01), undefined, 0.5 * (0, _Util.randomBetween)(0.5, 1), 0.05);\n\t\t}\n\t}, {\n\t\tkey: 'down',\n\t\tvalue: function down(time) {\n\t\t\tthis._squash(time);\n\t\t\tthis._downTime = time;\n\t\t\tthis._playSample(time, 'down');\n\t\t}\n\t}, {\n\t\tkey: 'up',\n\t\tvalue: function up(time) {\n\t\t\tthis._squash(time);\n\t\t\tthis._downTime = Infinity;\n\t\t\tthis._playSample(time, 'up');\n\t\t}\n\t}, {\n\t\tkey: 'isDown',\n\t\tvalue: function isDown(time) {\n\t\t\treturn time > this._downTime;\n\t\t}\n\t}]);\n\n\treturn Pedal;\n}(_PianoBase3.default);\n\nexports.default = Pedal;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nvar _PianoBase2 = __webpack_require__(3);\n\nvar _PianoBase3 = _interopRequireDefault(_PianoBase2);\n\nvar _Util = __webpack_require__(2);\n\nvar _tone = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Release = function (_PianoBase) {\n\t_inherits(Release, _PianoBase);\n\n\tfunction Release(range) {\n\t\t_classCallCheck(this, Release);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Release.__proto__ || Object.getPrototypeOf(Release)).call(this));\n\n\t\t_this._buffers = {};\n\t\tfor (var i = range[0]; i <= range[1]; i++) {\n\t\t\t_this._buffers[i] = _Salamander2.default.getReleasesUrl(i);\n\t\t}\n\t\treturn _this;\n\t}\n\n\t_createClass(Release, [{\n\t\tkey: 'load',\n\t\tvalue: function load(baseUrl) {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (success) {\n\t\t\t\t_this2._buffers = new _tone.Buffers(_this2._buffers, success, baseUrl);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'start',\n\t\tvalue: function start(note, time, velocity) {\n\t\t\tif (this._buffers.has(note)) {\n\t\t\t\tvar source = (0, _Util.createSource)(this._buffers.get(note)).connect(this.output);\n\t\t\t\t//randomize the velocity slightly\n\t\t\t\tvelocity *= (0, _Util.randomBetween)(0.5, 1);\n\t\t\t\tsource.start(time, 0, undefined, 0.015 * velocity, 0);\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn Release;\n}(_PianoBase3.default);\n\nexports.default = Release;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Piano = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nvar _Pedal = __webpack_require__(6);\n\nvar _Pedal2 = _interopRequireDefault(_Pedal);\n\nvar _Notes = __webpack_require__(5);\n\nvar _Harmonics = __webpack_require__(4);\n\nvar _Harmonics2 = _interopRequireDefault(_Harmonics);\n\nvar _Release = __webpack_require__(7);\n\nvar _Release2 = _interopRequireDefault(_Release);\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n *  @class Multisampled Grand Piano using [Salamander Piano Samples](https://archive.org/details/SalamanderGrandPianoV3)\r\n *  @extends {Tone}\r\n */\nvar Piano = exports.Piano = function (_AudioNode) {\n\t_inherits(Piano, _AudioNode);\n\n\tfunction Piano() {\n\t\t_classCallCheck(this, Piano);\n\n\t\tvar options = _tone2.default.defaults(arguments, [\"range\", \"velocities\", \"release\"], {\n\t\t\tvelocities: 1,\n\t\t\trange: [21, 108],\n\t\t\trelease: true\n\t\t});\n\n\t\tvar _this = _possibleConstructorReturn(this, (Piano.__proto__ || Object.getPrototypeOf(Piano)).call(this));\n\n\t\t_this.createInsOuts(0, 1);\n\n\t\t_this._loaded = false;\n\n\t\t_this._heldNotes = new Map();\n\n\t\t_this._sustainedNotes = new Map();\n\n\t\t_this._notes = new _Notes.Notes(options.range, options.velocities).connect(_this.output);\n\n\t\t_this._pedal = new _Pedal2.default().connect(_this.output);\n\n\t\tif (options.release) {\n\t\t\t_this._harmonics = new _Harmonics2.default(options.range).connect(_this.output);\n\n\t\t\t_this._release = new _Release2.default(options.range).connect(_this.output);\n\t\t}\n\t\treturn _this;\n\t}\n\n\t/**\r\n  *  Load all the samples\r\n  *  @param  {String}  baseUrl  The url for the Salamander base folder\r\n  *  @return  {Promise}\r\n  */\n\n\n\t_createClass(Piano, [{\n\t\tkey: 'load',\n\t\tvalue: function load() {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'https://tambien.github.io/Piano/Salamander/';\n\n\t\t\tvar promises = [this._notes.load(url), this._pedal.load(url)];\n\t\t\tif (this._harmonics) {\n\t\t\t\tpromises.push(this._harmonics.load(url));\n\t\t\t}\n\t\t\tif (this._release) {\n\t\t\t\tpromises.push(this._release.load(url));\n\t\t\t}\n\t\t\treturn Promise.all(promises).then(function () {\n\t\t\t\t_this2._loaded = true;\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * If all the samples are loaded or not\r\n   * @readOnly\r\n   * @type {Boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'pedalDown',\n\n\n\t\t/**\r\n   *  Put the pedal down at the given time. Causes subsequent\r\n   *  notes and currently held notes to sustain.\r\n   *  @param  {Time}  time  The time the pedal should go down\r\n   *  @returns {Piano} this\r\n   */\n\t\tvalue: function pedalDown(time) {\n\t\t\tif (this.loaded) {\n\t\t\t\ttime = this.toSeconds(time);\n\t\t\t\tif (!this._pedal.isDown(time)) {\n\t\t\t\t\tthis._pedal.down(time);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\r\n   *  Put the pedal up. Dampens sustained notes\r\n   *  @param  {Time}  time  The time the pedal should go up\r\n   *  @returns {Piano} this\r\n   */\n\n\t}, {\n\t\tkey: 'pedalUp',\n\t\tvalue: function pedalUp(time) {\n\t\t\tvar _this3 = this;\n\n\t\t\tif (this.loaded) {\n\t\t\t\ttime = this.toSeconds(time);\n\t\t\t\tif (this._pedal.isDown(time)) {\n\t\t\t\t\tthis._pedal.up(time);\n\t\t\t\t\t// dampen each of the notes\n\t\t\t\t\tthis._sustainedNotes.forEach(function (t, note) {\n\t\t\t\t\t\tif (!_this3._heldNotes.has(note)) {\n\t\t\t\t\t\t\t_this3._notes.stop(note, time);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis._sustainedNotes.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\r\n   *  Play a note.\r\n   *  @param  {String|Number}  note      The note to play. If it is a number, it is assumed\r\n   *                                     to be MIDI\r\n   *  @param  {NormalRange}  velocity  The velocity to play the note\r\n   *  @param  {Time}  time      The time of the event\r\n   *  @return  {Piano}  this\r\n   */\n\n\t}, {\n\t\tkey: 'keyDown',\n\t\tvalue: function keyDown(note) {\n\t\t\tvar time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _tone2.default.now();\n\t\t\tvar velocity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.8;\n\n\t\t\tif (this.loaded) {\n\t\t\t\ttime = this.toSeconds(time);\n\n\t\t\t\tif (_tone2.default.isString(note)) {\n\t\t\t\t\tnote = Math.round((0, _tone.Frequency)(note).toMidi());\n\t\t\t\t}\n\n\t\t\t\tif (!this._heldNotes.has(note)) {\n\t\t\t\t\t//record the start time and velocity\n\t\t\t\t\tthis._heldNotes.set(note, { time: time, velocity: velocity });\n\n\t\t\t\t\tthis._notes.start(note, time, velocity);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\r\n   *  Release a held note.\r\n   *  @param  {String|Number}  note      The note to stop\r\n   *  @param  {Time}  time      The time of the event\r\n   *  @return  {Piano}  this\r\n   */\n\n\t}, {\n\t\tkey: 'keyUp',\n\t\tvalue: function keyUp(note) {\n\t\t\tvar time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _tone2.default.now();\n\t\t\tvar velocity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.8;\n\n\t\t\tif (this.loaded) {\n\t\t\t\ttime = this.toSeconds(time);\n\n\t\t\t\tif (_tone2.default.isString(note)) {\n\t\t\t\t\tnote = Math.round((0, _tone.Frequency)(note).toMidi());\n\t\t\t\t}\n\n\t\t\t\tif (this._heldNotes.has(note)) {\n\n\t\t\t\t\tvar prevNote = this._heldNotes.get(note);\n\t\t\t\t\tthis._heldNotes.delete(note);\n\n\t\t\t\t\tif (this._release) {\n\t\t\t\t\t\tthis._release.start(note, time, velocity);\n\t\t\t\t\t}\n\n\t\t\t\t\t//compute the release velocity\n\t\t\t\t\tvar holdTime = time - prevNote.time;\n\t\t\t\t\tvar prevVel = prevNote.velocity;\n\t\t\t\t\tvar dampenGain = 0.5 / Math.max(holdTime, 0.1) + prevVel + velocity;\n\t\t\t\t\tdampenGain = Math.pow(Math.log(Math.max(dampenGain, 1)), 2) / 2;\n\n\t\t\t\t\tif (this._pedal.isDown(time)) {\n\t\t\t\t\t\tif (!this._sustainedNotes.has(note)) {\n\t\t\t\t\t\t\tthis._sustainedNotes.set(note, time);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._notes.stop(note, time, velocity);\n\n\t\t\t\t\t\tif (this._harmonics) {\n\t\t\t\t\t\t\tthis._harmonics.start(note, time, dampenGain);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\r\n   *  Set the volumes of each of the components\r\n   *  @param {String} param\r\n   *  @param {Decibels} vol\r\n   *  @return {Piano} this\r\n   *  @example\r\n   * //either as an string\r\n   * piano.setVolume('release', -10)\r\n   */\n\n\t}, {\n\t\tkey: 'setVolume',\n\t\tvalue: function setVolume(param, vol) {\n\t\t\tswitch (param) {\n\t\t\t\tcase 'note':\n\t\t\t\t\tthis._notes.volume = vol;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pedal':\n\t\t\t\t\tthis._pedal.volume = vol;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'release':\n\t\t\t\t\tif (this._release) {\n\t\t\t\t\t\tthis._release.volume = vol;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'harmonics':\n\t\t\t\t\tif (this._harmonics) {\n\t\t\t\t\t\tthis._harmonics.volume = vol;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'stopAll',\n\t\tvalue: function stopAll() {\n\t\t\tvar _this4 = this;\n\n\t\t\tthis.pedalUp();\n\t\t\tthis._heldNotes.forEach(function (value, note) {\n\t\t\t\t_this4.keyUp(note);\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\r\n   * Callback to invoke with normalized progress\r\n   * @param  {Function} cb\r\n   */\n\n\t}, {\n\t\tkey: 'progress',\n\t\tvalue: function progress(cb) {\n\t\t\t_tone.Buffer.on('progress', cb);\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'loaded',\n\t\tget: function get() {\n\t\t\treturn this._loaded;\n\t\t}\n\t}]);\n\n\treturn Piano;\n}(_tone.AudioNode);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// build/Piano.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 164a96c88337b3b4f292","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"tone\"\n// module id = 0\n// module chunks = 0","import {noteToMidi, midiToNote} from './Util'\r\n\r\nexport default {\r\n\r\n\tgetReleasesUrl(midi){\r\n\t\treturn `rel${midi - 20}.[mp3|ogg]`\r\n\t},\r\n\r\n\tgetHarmonicsUrl(midi){\r\n\t\treturn `harmL${midiToNote(midi).replace('#', 's')}.[mp3|ogg]`\r\n\t},\r\n\r\n\tgetNotesUrl(midi, vel){\r\n\t\treturn `${midiToNote(midi).replace('#', 's')}v${vel}.[mp3|ogg]`\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./Salamander.js","import Tone, { Frequency, BufferSource } from 'tone'\r\n\r\nfunction noteToMidi(note){\r\n\treturn Frequency(note).toMidi()\r\n}\r\n\r\nfunction midiToNote(midi){\r\n\treturn Frequency(midi, 'midi').toNote()\r\n}\r\n\r\nfunction midiToFrequencyRatio(midi){\r\n\tlet mod = midi % 3\r\n\tif (mod === 1){\r\n\t\treturn [midi - 1, Tone.intervalToFrequencyRatio(1)]\r\n\t} else if (mod === 2){\r\n\t\treturn [midi + 1, Tone.intervalToFrequencyRatio(-1)]\r\n\t} else {\r\n\t\treturn [midi, 1]\r\n\t}\r\n}\r\n\r\nfunction createSource(buffer){\r\n\treturn new BufferSource(buffer)\r\n}\r\n\r\nfunction randomBetween(low, high){\r\n\treturn Math.random() * (high - low) + low\r\n}\r\n\r\nexport {midiToNote, noteToMidi, createSource, midiToFrequencyRatio, randomBetween}\r\n\n\n\n// WEBPACK FOOTER //\n// ./Util.js","import Tone, {AudioNode} from 'tone'\r\n\r\nexport default class PianoBase extends AudioNode {\r\n\tconstructor(vol = 0) {\r\n\t\tsuper()\r\n\t\tthis.createInsOuts(0, 1)\r\n\r\n\t\tthis.volume = vol\r\n\t}\r\n\tget volume() {\r\n\t\treturn Tone.gainToDb(this.output.gain.value)\r\n\t}\r\n\tset volume(vol) {\r\n\t\tthis.output.gain.value = Tone.dbToGain(vol)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./PianoBase.js","import Salamander from './Salamander'\r\nimport PianoBase from './PianoBase'\r\nimport {noteToMidi, createSource, midiToFrequencyRatio, midiToNote, randomBetween} from './Util'\r\nimport { Buffers , Sampler, Frequency} from 'tone'\r\n\r\n// the harmonics notes that Salamander has\r\nconst harmonics = [21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87]\r\n\r\nexport default class Harmonics extends PianoBase {\r\n\r\n\tconstructor(range=[21, 108]){\r\n\t\tsuper()\r\n\r\n\t\tconst lowerIndex = harmonics.findIndex((note) => note >= range[0])\r\n\t\tlet upperIndex = harmonics.findIndex((note) => note >= range[1])\r\n\t\tupperIndex = upperIndex === -1 ? upperIndex = harmonics.length : upperIndex\r\n\r\n\t\tconst notes = harmonics.slice(lowerIndex, upperIndex)\r\n\r\n\t\tthis._samples = {}\r\n\r\n\t\tfor (let n of notes){\r\n\t\t\tthis._samples[n] = Salamander.getHarmonicsUrl(n)\r\n\t\t}\r\n\t}\r\n\r\n\tstart(note, time, velocity){\r\n\t\t//make sure it's a valid range\r\n\t\tif (note >= harmonics[0] && note <= harmonics[harmonics.length-1]){\r\n\t\t\tthis._sampler.triggerAttack(midiToNote(note), time, velocity * randomBetween(0.5, 1))\r\n\t\t}\r\n\t}\r\n\r\n\tload(baseUrl){\r\n\t\treturn new Promise((success, fail) => {\r\n\t\t\tthis._sampler = new Sampler(this._samples, success, baseUrl).connect(this.output)\r\n\t\t\tthis._sampler.release = 1\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./Harmonics.js","import Tone, { Buffers , MultiSampler} from 'tone'\r\nimport Salamander from './Salamander'\r\nimport PianoBase from './PianoBase'\r\nimport {noteToMidi, createSource, midiToNote, midiToFrequencyRatio} from './Util'\r\n\r\n/**\r\n * Maps velocity depths to Salamander velocities\r\n */\r\nconst velocitiesMap = {\r\n\t1  : [8],\r\n\t2  : [6, 12],\r\n\t3  : [1, 8, 15],\r\n\t4  : [1, 5, 10, 15],\r\n\t5  : [1, 4, 8, 12, 16],\r\n\t6  : [1, 3, 7, 10, 13, 16],\r\n\t7  : [1, 3, 6, 9, 11, 13, 16],\r\n\t8  : [1, 3, 5, 7, 9, 11, 13, 15],\r\n\t9  : [1, 3, 5, 7, 9, 11, 13, 15, 16],\r\n\t10 : [1, 2, 3, 5, 7, 9, 11, 13, 15, 16],\r\n\t11 : [1, 2, 3, 5, 7, 9, 11, 13, 14, 15, 16],\r\n\t12 : [1, 2, 3, 4, 5, 7, 9, 11, 13, 14, 15, 16],\r\n\t13 : [1, 2, 3, 4, 5, 7, 9, 11, 12, 13, 14, 15, 16],\r\n\t14 : [1, 2, 3, 4, 5, 6, 7, 9, 11, 12, 13, 14, 15, 16],\r\n\t15 : [1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16],\r\n\t16 : [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],\r\n}\r\n\r\nconst notes = [21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87, 90, 93, 96, 99, 102, 105, 108]\r\n\r\n/**\r\n *  Manages all of the hammered string sounds\r\n */\r\nexport class Notes extends PianoBase {\r\n\r\n\tconstructor(range=[21, 108], velocities=1){\r\n\t\tsuper()\r\n\r\n\t\tconst lowerIndex = notes.findIndex((note) => note >= range[0])\r\n\t\tlet upperIndex = notes.findIndex((note) => note >= range[1])\r\n\t\tupperIndex = upperIndex === -1 ? upperIndex = notes.length : upperIndex + 1\r\n\r\n\t\tconst slicedNotes = notes.slice(lowerIndex, upperIndex)\r\n\r\n\t\tthis._samplers = velocitiesMap[velocities].slice()\r\n\r\n\t\tthis._activeNotes = new Map()\r\n\r\n\t\tthis._samplers.forEach((vel, i) => {\r\n\t\t\tthis._samplers[i] = {}\r\n\t\t\tslicedNotes.forEach((note) => {\r\n\t\t\t\tthis._samplers[i][note] = Salamander.getNotesUrl(note, vel)\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\t_hasNote(note, velocity){\r\n\t\treturn this._samplers.hasOwnProperty(velocity) && this._samplers[velocity].has(note)\r\n\t}\r\n\r\n\t_getNote(note, velocity){\r\n\t\treturn this._samplers[velocity].get(note)\r\n\t}\r\n\t\r\n\t_disposeSource(src){\r\n\t\tsrc.dispose();\r\n\t\tsrc = null;\r\n\t}\r\n\r\n\tstop(note, time, velocity){\r\n\t\t//stop all of the currently playing note\r\n\t\tif (this._activeNotes.has(note)){\r\n\t\t\tthis._activeNotes.get(note).forEach(source => {\r\n\t\t\t\tconst release = 1\r\n\t\t\t\tsource.onended = this._disposeSource\r\n\t\t\t\tsource.stop(time + release, release)\r\n\t\t\t})\r\n\t\t\tthis._activeNotes.delete(note)\r\n\t\t}\r\n\t}\r\n\r\n\tstart(note, time, velocity){\r\n\r\n\t\tconst velPos = velocity * (this._samplers.length - 1)\r\n\t\tconst roundedVel = Math.round(velPos)\r\n\t\tconst diff = roundedVel - velPos\r\n\t\tlet gain = 1 - diff * 0.5\r\n\r\n\t\tif (this._samplers.length === 1){\r\n\t\t\tgain = velocity\r\n\t\t}\r\n\r\n\t\tlet [midi, ratio] = midiToFrequencyRatio(note)\r\n\r\n\t\tif (this._hasNote(midi, roundedVel)){\r\n\t\t\tconst source = createSource(this._getNote(midi, roundedVel))\r\n\t\t\tsource.playbackRate.value = ratio\r\n\t\t\tsource.connect(this.output)\r\n\t\t\tsource.curve = 'exponential'\r\n\t\t\tsource.start(time, 0, undefined, gain, 0)\r\n\r\n\t\t\tif (!this._activeNotes.has(note)){\r\n\t\t\t\tthis._activeNotes.set(note, [])\r\n\t\t\t}\r\n\t\t\tthis._activeNotes.get(note).push(source)\r\n\t\t}\r\n\t}\r\n\r\n\tload(baseUrl){\r\n\t\tconst promises = []\r\n\t\tthis._samplers.forEach((obj, i) => {\r\n\t\t\tlet prom = new Promise((success) => {\r\n\t\t\t\tthis._samplers[i] = new Buffers(obj, success, baseUrl)\r\n\t\t\t})\r\n\t\t\tpromises.push(prom)\r\n\t\t})\r\n\t\treturn Promise.all(promises)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./Notes.js","import PianoBase from './PianoBase'\r\nimport Salamander from './Salamander'\r\nimport {createSource, randomBetween} from './Util'\r\nimport Tone, {Buffers} from 'tone'\r\n\r\nexport default class Pedal extends PianoBase {\r\n\tconstructor(){\r\n\t\tsuper()\r\n\r\n\t\tthis._downTime = Infinity\r\n\r\n\t\tthis._currentSound = null\r\n\r\n\t\tthis._buffers = null\r\n\t}\r\n\r\n\tload(baseUrl){\r\n\t\treturn new Promise((success) => {\r\n\t\t\tthis._buffers = new Buffers({\r\n\t\t\t\tup : 'pedalU1.mp3',\r\n\t\t\t\tdown : 'pedalD1.mp3'\r\n\t\t\t}, success, baseUrl)\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t *  Squash the current playing sound\r\n\t */\r\n\t_squash(time){\r\n\t\tif (this._currentSound){\r\n\t\t\tthis._currentSound.stop(time+0.1, 0.1)\r\n\t\t}\r\n\t\tthis._currentSound = null\r\n\t}\r\n\r\n\t_playSample(time, dir){\r\n\t\tthis._currentSound = createSource(this._buffers.get(dir))\r\n\t\tthis._currentSound.curve = 'exponential'\r\n\t\tthis._currentSound.connect(this.output).start(time, randomBetween(0, 0.01), undefined, 0.5 * randomBetween(0.5, 1), 0.05)\r\n\t}\r\n\r\n\tdown(time){\r\n\t\tthis._squash(time)\r\n\t\tthis._downTime = time\r\n\t\tthis._playSample(time, 'down')\r\n\t}\r\n\r\n\tup(time){\r\n\t\tthis._squash(time)\r\n\t\tthis._downTime = Infinity\r\n\t\tthis._playSample(time, 'up')\r\n\t}\r\n\r\n\tisDown(time){\r\n\t\treturn time > this._downTime\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./Pedal.js","import Salamander from './Salamander'\r\nimport PianoBase from './PianoBase'\r\nimport {createSource, randomBetween} from './Util'\r\nimport { Buffers } from 'tone'\r\n\r\nexport default class Release extends PianoBase {\r\n\r\n\tconstructor(range){\r\n\t\tsuper()\r\n\r\n\t\tthis._buffers = {}\r\n\t\tfor (let i = range[0]; i <= range[1]; i++){\r\n\t\t\tthis._buffers[i] = Salamander.getReleasesUrl(i)\r\n\t\t}\r\n\t}\r\n\r\n\tload(baseUrl){\r\n\t\treturn new Promise((success) => {\r\n\t\t\tthis._buffers = new Buffers(this._buffers, success, baseUrl)\r\n\t\t})\r\n\t}\r\n\r\n\tstart(note, time, velocity){\r\n\t\tif (this._buffers.has(note)){\r\n\t\t\tlet source = createSource(this._buffers.get(note)).connect(this.output)\r\n\t\t\t//randomize the velocity slightly\r\n\t\t\tvelocity *= randomBetween(0.5, 1)\r\n\t\t\tsource.start(time, 0, undefined, 0.015 * velocity, 0)\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./Release.js","import Tone, { Gain, Frequency, AudioNode, Buffer} from 'tone'\r\nimport Pedal from './Pedal'\r\nimport {Notes} from './Notes'\r\nimport Harmonics from './Harmonics'\r\nimport Release from './Release'\r\nimport Salamander from './Salamander'\r\n\r\n/**\r\n *  @class Multisampled Grand Piano using [Salamander Piano Samples](https://archive.org/details/SalamanderGrandPianoV3)\r\n *  @extends {Tone}\r\n */\r\nexport class Piano extends AudioNode {\r\n\r\n\tconstructor(){\r\n\r\n\t\tconst options = Tone.defaults(arguments, [\"range\", \"velocities\", \"release\"], {\r\n\t\t\tvelocities : 1,\r\n\t\t\trange : [21, 108],\r\n\t\t\trelease : true\r\n\t\t});\r\n\r\n\t\tsuper()\r\n\t\tthis.createInsOuts(0, 1)\r\n\r\n\t\tthis._loaded = false\r\n\r\n\t\tthis._heldNotes = new Map()\r\n\r\n\t\tthis._sustainedNotes = new Map()\r\n\r\n\t\tthis._notes = new Notes(options.range, options.velocities).connect(this.output)\r\n\r\n\t\tthis._pedal = new Pedal().connect(this.output)\r\n\r\n\t\tif (options.release){\r\n\t\t\tthis._harmonics = new Harmonics(options.range).connect(this.output)\r\n\r\n\t\t\tthis._release = new Release(options.range).connect(this.output)\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t *  Load all the samples\r\n\t *  @param  {String}  baseUrl  The url for the Salamander base folder\r\n\t *  @return  {Promise}\r\n\t */\r\n\tload(url='https://tambien.github.io/Piano/Salamander/'){\r\n\t\tconst promises = [this._notes.load(url), this._pedal.load(url)]\r\n\t\tif (this._harmonics){\r\n\t\t\tpromises.push(this._harmonics.load(url))\r\n\t\t}\r\n\t\tif (this._release){\r\n\t\t\tpromises.push(this._release.load(url))\r\n\t\t}\r\n\t\treturn Promise.all(promises).then(() => {\r\n\t\t\tthis._loaded = true\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * If all the samples are loaded or not\r\n\t * @readOnly\r\n\t * @type {Boolean}\r\n\t */\r\n\tget loaded(){\r\n\t\treturn this._loaded\r\n\t}\r\n\r\n\t/**\r\n\t *  Put the pedal down at the given time. Causes subsequent\r\n\t *  notes and currently held notes to sustain.\r\n\t *  @param  {Time}  time  The time the pedal should go down\r\n\t *  @returns {Piano} this\r\n\t */\r\n\tpedalDown(time){\r\n\t\tif (this.loaded){\r\n\t\t\ttime = this.toSeconds(time)\r\n\t\t\tif (!this._pedal.isDown(time)){\r\n\t\t\t\tthis._pedal.down(time)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this\r\n\t}\r\n\r\n\t/**\r\n\t *  Put the pedal up. Dampens sustained notes\r\n\t *  @param  {Time}  time  The time the pedal should go up\r\n\t *  @returns {Piano} this\r\n\t */\r\n\tpedalUp(time){\r\n\t\tif (this.loaded){\r\n\t\t\ttime = this.toSeconds(time)\r\n\t\t\tif (this._pedal.isDown(time)){\r\n\t\t\t\tthis._pedal.up(time)\r\n\t\t\t\t// dampen each of the notes\r\n\t\t\t\tthis._sustainedNotes.forEach((t, note) => {\r\n\t\t\t\t\tif (!this._heldNotes.has(note)){\r\n\t\t\t\t\t\tthis._notes.stop(note, time)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis._sustainedNotes.clear()\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this\r\n\t}\r\n\r\n\t/**\r\n\t *  Play a note.\r\n\t *  @param  {String|Number}  note      The note to play. If it is a number, it is assumed\r\n\t *                                     to be MIDI\r\n\t *  @param  {NormalRange}  velocity  The velocity to play the note\r\n\t *  @param  {Time}  time      The time of the event\r\n\t *  @return  {Piano}  this\r\n\t */\r\n\tkeyDown(note, time=Tone.now(), velocity=0.8){\r\n\t\tif (this.loaded){\r\n\t\t\ttime = this.toSeconds(time)\r\n\r\n\t\t\tif (Tone.isString(note)){\r\n\t\t\t\tnote = Math.round(Frequency(note).toMidi())\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._heldNotes.has(note)){\r\n\t\t\t\t//record the start time and velocity\r\n\t\t\t\tthis._heldNotes.set(note, {time, velocity})\r\n\r\n\t\t\t\tthis._notes.start(note, time, velocity)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this\r\n\t}\r\n\r\n\t/**\r\n\t *  Release a held note.\r\n\t *  @param  {String|Number}  note      The note to stop\r\n\t *  @param  {Time}  time      The time of the event\r\n\t *  @return  {Piano}  this\r\n\t */\r\n\tkeyUp(note, time=Tone.now(), velocity=0.8){\r\n\t\tif (this.loaded){\r\n\t\t\ttime = this.toSeconds(time)\r\n\r\n\t\t\tif (Tone.isString(note)){\r\n\t\t\t\tnote = Math.round(Frequency(note).toMidi())\r\n\t\t\t}\r\n\r\n\t\t\tif (this._heldNotes.has(note)){\r\n\r\n\t\t\t\tconst prevNote = this._heldNotes.get(note)\r\n\t\t\t\tthis._heldNotes.delete(note)\r\n\r\n\t\t\t\tif (this._release){\r\n\t\t\t\t\tthis._release.start(note, time, velocity)\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//compute the release velocity\r\n\t\t\t\tconst holdTime = time - prevNote.time\r\n\t\t\t\tconst prevVel = prevNote.velocity\r\n\t\t\t\tlet dampenGain = (0.5/Math.max(holdTime, 0.1)) + prevVel + velocity\r\n\t\t\t\tdampenGain = Math.pow(Math.log(Math.max(dampenGain, 1)), 2) / 2\r\n\r\n\t\t\t\tif (this._pedal.isDown(time)){\r\n\t\t\t\t\tif (!this._sustainedNotes.has(note)){\r\n\t\t\t\t\t\tthis._sustainedNotes.set(note, time)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._notes.stop(note, time, velocity)\r\n\r\n\t\t\t\t\tif (this._harmonics){\r\n\t\t\t\t\t\tthis._harmonics.start(note, time, dampenGain)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this\r\n\t}\r\n\r\n\t/**\r\n\t *  Set the volumes of each of the components\r\n\t *  @param {String} param\r\n\t *  @param {Decibels} vol\r\n\t *  @return {Piano} this\r\n\t *  @example\r\n\t * //either as an string\r\n\t * piano.setVolume('release', -10)\r\n\t */\r\n\tsetVolume(param, vol){\r\n\t\tswitch(param){\r\n\t\t\tcase 'note':\r\n\t\t\t\tthis._notes.volume = vol\r\n\t\t\t\tbreak\r\n\t\t\tcase 'pedal':\r\n\t\t\t\tthis._pedal.volume = vol\r\n\t\t\t\tbreak\r\n\t\t\tcase 'release':\r\n\t\t\t\tif (this._release){\r\n\t\t\t\t\tthis._release.volume = vol\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t\tcase 'harmonics':\r\n\t\t\t\tif (this._harmonics){\r\n\t\t\t\t\tthis._harmonics.volume = vol\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t\treturn this\r\n\t}\r\n\r\n\tstopAll(){\r\n\t\tthis.pedalUp()\r\n\t\tthis._heldNotes.forEach((value, note) => {\r\n\t\t\tthis.keyUp(note)\r\n\t\t})\r\n\t\treturn this\r\n\t}\r\n\r\n\t/**\r\n\t * Callback to invoke with normalized progress\r\n\t * @param  {Function} cb\r\n\t */\r\n\tprogress(cb){\r\n\t\tBuffer.on('progress', cb)\r\n\t\treturn this\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./Piano.js"],"sourceRoot":""}